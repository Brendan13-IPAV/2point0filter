<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Strategy Finder</title>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <style>
    /* Base styles */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: #1D2939;
      background-color: #F6FAFC;
      line-height: 1.5;
      margin: 0;
      padding: 0;
    }

    /* Color palette */
    :root {
      --dark-blue: #1D2939;
      --teal: #55ABC9;
      --light-mint: #F6FAFC;
      --border-color: #E4E7EC;
      --text-primary: #1D2939;
      --text-secondary: #667085;
      --highlight: #787ABB;
      
      /* IP Rights colors */
      --patent-color: #1DA7AF;
      --trademark-color: #DE4326;
      --design-color: #84C98F;
      --pbr-color: #F1AC1E;
      --copyright-color: #787ABB;
      --any-color: #667085;
    }

    /* Layout */
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    .header {
      background-color: var(--dark-blue);
      color: white;
      padding: 15px 0;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 22px;
      font-weight: 600;
    }

    .nav a {
      color: white;
      text-decoration: none;
      margin-left: 30px;
    }

    /* Footer */
    .footer {
      background-color: var(--dark-blue);
      color: white;
      padding: 15px 0;
      margin-top: 40px;
    }

    /* Main content */
    .main-content {
      padding: 40px 0;
    }
    
    /* Page title */
    .page-title {
      color: var(--teal);
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    /* Filter pills */
    .active-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .filter-pill {
      display: inline-flex;
      align-items: center;
      background-color: var(--light-mint);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 20px;
      cursor: pointer;
    }

    .filter-remove {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-left: 8px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: rgba(0, 0, 0, 0.1);
      color: var(--text-primary);
      font-size: 12px;
    }

    .right-trademark {
      background-color: rgba(222, 67, 38, 0.1);
      border-color: var(--trademark-color);
    }

    .situation {
      background-color: rgba(85, 171, 201, 0.1);
      border-color: var(--teal);
    }

    /* Accordion */
    .accordion {
      margin-bottom: 16px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      overflow: hidden;
    }

    .accordion-header {
      background-color: white;
      padding: 16px;
      font-weight: 500;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    .accordion-title {
      display: flex;
      align-items: center;
    }

    .accordion-icon {
      margin-right: 8px;
    }

    .accordion-content {
      padding: 16px;
      border-top: 1px solid var(--border-color);
    }

    /* Grid layout */
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }

    @media (min-width: 768px) {
      .grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (min-width: 1024px) {
      .grid {
        grid-template-columns: 1fr 3fr;
      }
    }

    /* Radio button group */
    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .radio-button {
      display: inline-block;
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .radio-selected {
      background-color: var(--teal);
      color: white;
      border-color: var(--teal);
    }

    /* Preference button group styles */
    .preference-group {
      margin-bottom: 20px;
    }

    .preference-label {
      display: block;
      font-weight: 500;
      margin-bottom: 8px;
    }

    /* Card styling */
    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
      padding: 24px;
      margin-bottom: 20px;
    }

    /* Strategy grid */
    .strategy-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .strategy-wrapper:nth-child(even) {
      transform: translateY(70px);
    }

    .strategy-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
      padding: 24px;
      height: 100%;
    }

    .border-trademark {
      border-left: 3px solid var(--trademark-color);
    }

    .border-any {
      border-left: 3px solid var(--any-color);
    }

    .border-copyright {
      border-left: 3px solid var(--copyright-color);
    }

    /* Tag styling */
    .tag {
      display: inline-block;
      background-color: rgba(85, 171, 201, 0.1);
      color: var(--teal);
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 4px;
      margin-right: 8px;
      margin-bottom: 5px;
    }

    /* Relevancy indicator */
    .relevancy {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-bottom: 10px;
    }

    .relevancy-label {
      font-size: 11px;
      margin-right: 5px;
    }

    .relevancy-badge {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 600;
      color: white;
    }

    .very-high {
      background-color: rgba(34, 197, 94, 1);
    }

    .high {
      background-color: rgba(34, 197, 94, 0.8);
    }

    .medium {
      background-color: rgba(34, 197, 94, 0.6);
    }

    .low {
      background-color: rgba(34, 197, 94, 0.4);
    }

    .very-low {
      background-color: rgba(34, 197, 94, 0.2);
    }

    /* Strategy details */
    .strategy-overtitle {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 4px;
    }

    .strategy-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .strategy-description {
      color: var(--text-primary);
      margin-bottom: 16px;
    }

    .strategy-metadata {
      font-size: 11px;
      color: var(--text-secondary);
    }

    .metadata-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    /* Empty state */
    .empty-state {
      background-color: #F9FAFB;
      padding: 32px;
      text-align: center;
      border-radius: 8px;
    }

    .empty-message {
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">IP Strategy Finder</div>
        <nav class="nav">
          <a href="#">Home</a>
          <a href="#">About</a>
        </nav>
      </div>
    </div>
  </header>

  <div class="container main-content">
    <div id="app"></div>
  </div>

  <footer class="footer">
    <div class="container">
      <p style="text-align: center; font-size: 14px;">&copy; 2025 IP Strategy Finder</p>
    </div>
  </footer>

  <!-- Simple pre-built data -->
  <script>
    // IP Strategy data
    var strategiesData = [
      {
        id: 4,
        overtitle: "Trade mark opposition",
        title: "Challenge the registration of a trade mark",
        description: "Initiate a trade mark opposition process against a new trademark with IP Australia",
        responseType: ["Enforcement", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 6,
          investment: 6,
          commercialAgreements: 2,
          thirdPartyServices: 7,
          legalAction: 7
        }
      },
      {
        id: 7,
        overtitle: "Court - Trade Mark",
        title: "Seek binding, authoritative decisions",
        description: "Escalate a wide range of trade mark matters to court",
        responseType: ["Enforcement", "Accused", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 9,
          investment: 10,
          commercialAgreements: 4,
          thirdPartyServices: 9,
          legalAction: 10
        }
      },
      {
        id: 14,
        overtitle: "Letter of demand",
        title: "Demand the other party stops infringing",
        description: "Send a letter to the infringing party notifying them of potential infringement.",
        responseType: ["Enforcement", "Professional"],
        right: "Any",
        scores: {
          timeCommitment: 3,
          investment: 2,
          commercialAgreements: 4,
          thirdPartyServices: 5,
          legalAction: 3
        }
      },
      {
        id: 18,
        overtitle: "Takedown request",
        title: "Stop infringement facilitated online",
        description: "Request infringing material is removed from online marketplaces and platforms.",
        responseType: ["Enforcement"],
        right: "Trade mark; Copyright",
        scores: {
          timeCommitment: 3,
          investment: 2,
          commercialAgreements: 2,
          thirdPartyServices: 3,
          legalAction: 2
        }
      },
      {
        id: 26,
        overtitle: "Domain Name Dispute (auDRP)",
        title: "Dispute a domain name that infringes your trade mark",
        description: "Dispute an .au domain name that may infringe an IP right",
        responseType: ["Enforcement", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 5,
          investment: 6,
          commercialAgreements: 3,
          thirdPartyServices: 7,
          legalAction: 6
        }
      },
      {
        id: 28,
        overtitle: "Apply for a trade mark",
        title: "Register your trade mark",
        description: "Strengthen your position as the registered owner of your trade mark in Australia",
        responseType: ["Proactive", "Enforcement", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 4,
          investment: 5,
          commercialAgreements: 5,
          thirdPartyServices: 6,
          legalAction: 2
        }
      }
    ];

    // IP rights options
    var ipRightsOptions = [
      { id: 'Patent', label: 'Patents', color: 'patent' },
      { id: 'Trade mark', label: 'Trade marks', color: 'trademark' },
      { id: 'Design', label: 'Design rights', color: 'design' },
      { id: 'PBR', label: 'Plant breeder\'s rights', color: 'pbr' },
      { id: 'Copyright', label: 'Copyright', color: 'copyright' },
      { id: 'Any', label: 'Any IP right', color: 'any' }
    ];
    
    // Situation options
    var situationOptions = [
      { id: 'Accused', label: 'I\'ve been accused of infringing' },
      { id: 'Enforcement', label: 'I believe my IP has been infringed' },
      { id: 'Proactive', label: 'I\'m proactively protecting my IP' },
      { id: 'Professional', label: 'I\'m seeking support of an IP professional' }
    ];

    // Preference configurations
    var preferenceConfigs = {
      timeCommitment: {
        label: 'Time Commitment',
        options: [
          { value: -2, label: 'Days' },
          { value: -1, label: 'Weeks' },
          { value: 1, label: '1-12 Months' },
          { value: 2, label: '12+ Months' }
        ]
      },
      investment: {
        label: 'Investment',
        options: [
          { value: -2, label: 'Under $1,000' },
          { value: -1, label: 'Under $5,000' },
          { value: 1, label: 'Under $25,000' },
          { value: 2, label: '$25,000+' }
        ]
      },
      commercialAgreements: {
        label: 'Commercial Agreements',
        options: [
          { value: -1, label: 'Avoid agreements' },
          { value: 1, label: 'Open to agreements' }
        ]
      },
      thirdPartyServices: {
        label: 'Third-Party Services',
        options: [
          { value: -2, label: 'Self-managed only' },
          { value: -1, label: 'Minimal assistance' },
          { value: 1, label: 'Professional support' },
          { value: 2, label: 'Full service solution' }
        ]
      },
      legalAction: {
        label: 'Legal Action',
        options: [
          { value: -2, label: 'Strongly avoid' },
          { value: -1, label: 'Prefer to avoid' },
          { value: 1, label: 'Open to consider' },
          { value: 2, label: 'Willing to use' }
        ]
      }
    };
  </script>

  <script>
    // Main application code
    function IPStrategyFinder() {
      // State management
      var state = {
        loading: true,
        strategies: [],
        filteredStrategies: [],
        accordions: {
          preferences: false,
          otherFactors: false
        },
        selectedRights: ['Trade mark'],
        selectedSituations: ['Enforcement'],
        preferences: {
          timeCommitment: 0,
          investment: 0,
          commercialAgreements: 0,
          thirdPartyServices: 0,
          legalAction: 0
        },
        otherFactors: {
          onlineMarkets: 'neutral',
          domainName: 'neutral',
          importingGoods: 'neutral',
          identifyParty: 'neutral'
        }
      };

      // Initialize and render the application
      function init() {
        // Set strategies data and update loading state
        state.strategies = strategiesData;
        state.loading = false;

        // Filter and rank strategies based on initial state
        filterAndRankStrategies();

        // Render the UI
        render();
      }

      // Filter and rank strategies based on current selections
      function filterAndRankStrategies() {
        // Start with all strategies
        var filtered = state.strategies.slice();
        
        // Filter by selected IP rights
        if (state.selectedRights.length > 0) {
          filtered = filtered.filter(function(strategy) {
            var strategyRights = strategy.right.split('; ');
            return state.selectedRights.some(function(right) {
              return strategyRights.includes(right) || 
                     strategyRights.includes('Any') || 
                     strategyRights.includes('Any IP right');
            });
          });
        }
        
        // Filter by selected situations
        if (state.selectedSituations.length > 0) {
          filtered = filtered.filter(function(strategy) {
            return state.selectedSituations.some(function(situation) {
              return strategy.responseType.includes(situation);
            });
          });
        }
        
        // Calculate scores and rank strategies
        var ranked = filtered.map(function(strategy) {
          var totalScore = 0;
          var totalWeight = 0;
          var matches = [];
          var nonMatches = [];
          
          // Calculate match for each preference
          function calculateMatch(preference, prefValue, strategyValue) {
            if (prefValue === 0) return { score: 0, weight: 0 };
            
            var config = preferenceConfigs[preference];
            var values = config.options.map(function(opt) { 
              return Math.abs(opt.value); 
            });
            var maxValue = Math.max.apply(null, values);
            
            if (prefValue > 0) {
              var expectedValue = (prefValue / maxValue) * 10;
              var score = Math.max(0, 10 - Math.abs(expectedValue - strategyValue));
              var weight = Math.abs(prefValue) / maxValue;
              
              return { score: score, weight: weight, isMatch: score > 5 };
            } else {
              var score = Math.max(0, 10 - strategyValue);
              var weight = Math.abs(prefValue) / maxValue;
              
              return { score: score, weight: weight, isMatch: score > 5 };
            }
          }
          
          // Calculate matches for each preference
          var timeMatch = calculateMatch('timeCommitment', 
            state.preferences.timeCommitment, 
            strategy.scores.timeCommitment);
          
          var investMatch = calculateMatch('investment', 
            state.preferences.investment, 
            strategy.scores.investment);
          
          var agreementMatch = calculateMatch('commercialAgreements', 
            state.preferences.commercialAgreements, 
            strategy.scores.commercialAgreements);
          
          var serviceMatch = calculateMatch('thirdPartyServices', 
            state.preferences.thirdPartyServices, 
            strategy.scores.thirdPartyServices);
          
          var legalMatch = calculateMatch('legalAction', 
            state.preferences.legalAction, 
            strategy.scores.legalAction);
          
          // Add matches to lists
          if (timeMatch.weight > 0) {
            if (timeMatch.isMatch) matches.push('Time commitment');
            else nonMatches.push('Time commitment');
          }
          
          if (investMatch.weight > 0) {
            if (investMatch.isMatch) matches.push('Investment level');
            else nonMatches.push('Investment level');
          }
          
          if (agreementMatch.weight > 0) {
            if (agreementMatch.isMatch) matches.push('Commercial agreements');
            else nonMatches.push('Commercial agreements');
          }
          
          if (serviceMatch.weight > 0) {
            if (serviceMatch.isMatch) matches.push('Third-party services');
            else nonMatches.push('Third-party services');
          }
          
          if (legalMatch.weight > 0) {
            if (legalMatch.isMatch) matches.push('Legal action');
            else nonMatches.push('Legal action');
          }
          
          // Calculate weighted scores
          totalScore += timeMatch.score * timeMatch.weight;
          totalScore += investMatch.score * investMatch.weight;
          totalScore += agreementMatch.score * agreementMatch.weight;
          totalScore += serviceMatch.score * serviceMatch.weight;
          totalScore += legalMatch.score * legalMatch.weight;
          
          totalWeight += timeMatch.weight;
          totalWeight += investMatch.weight;
          totalWeight += agreementMatch.weight;
          totalWeight += serviceMatch.weight;
          totalWeight += legalMatch.weight;
          
          // Calculate final match score
          var matchScore = totalWeight > 0 
            ? (totalScore / (totalWeight * 10)) * 100 
            : 100;
          
          // Return the strategy with its score
          return {
            id: strategy.id,
            overtitle: strategy.overtitle,
            title: strategy.title,
            description: strategy.description,
            responseType: strategy.responseType,
            right: strategy.right,
            scores: strategy.scores,
            matchScore: matchScore,
            matches: matches,
            nonMatches: nonMatches
          };
        });
        
        // Sort by match score (highest first)
        ranked.sort(function(a, b) {
          return b.matchScore - a.matchScore;
        });
        
        state.filteredStrategies = ranked;
      }

      // Helper functions
      function getSituationLabel(situationId) {
        var situation = situationOptions.find(function(opt) {
          return opt.id === situationId;
        });
        return situation ? situation.label : situationId;
      }
      
      function getRightColor(rightId) {
        var right = ipRightsOptions.find(function(opt) {
          return opt.id === rightId;
        });
        return right ? right.color : 'any';
      }
      
      function getPreferenceText(preference, value) {
        if (value === 0) return '';
        
        var config = preferenceConfigs[preference];
        var option = config.options.find(function(opt) {
          return opt.value === value;
        });
        
        return option ? option.label : '';
      }
      
      function getRelevancyLevel(score) {
        if (score >= 90) return { level: 'very-high', text: 'Very High' };
        if (score >= 75) return { level: 'high', text: 'High' };
        if (score >= 50) return { level: 'medium', text: 'Medium' };
        if (score >= 25) return { level: 'low', text: 'Low' };
        return { level: 'very-low', text: 'Very Low' };
      }

      // Event handlers
      function toggleAccordion(section) {
        state.accordions[section] = !state.accordions[section];
        render();
      }
      
      function togglePreference(preference, value) {
        if (state.preferences[preference] === value) {
          state.preferences[preference] = 0;
        } else {
          state.preferences[preference] = value;
        }
        
        filterAndRankStrategies();
        render();
      }
      
      function toggleFactor(factor, value) {
        state.otherFactors[factor] = value;
        
        filterAndRankStrategies();
        render();
      }
      
      function removeRightFilter(rightId) {
        state.selectedRights = state.selectedRights.filter(function(id) {
          return id !== rightId;
        });
        
        filterAndRankStrategies();
        render();
      }
      
      function removeSituationFilter(situationId) {
        state.selectedSituations = state.selectedSituations.filter(function(id) {
          return id !== situationId;
        });
        
        filterAndRankStrategies();
        render();
      }
      
      function removePreferenceFilter(preference) {
        state.preferences[preference] = 0;
        
        filterAndRankStrategies();
        render();
      }

      // Rendering functions
      function render() {
        var appElement = document.getElementById('app');
        appElement.innerHTML = '';
        
        if (state.loading) {
          appElement.innerHTML = '<div class="text-center py-12"><div class="text-xl">Loading IP strategies...</div></div>';
          return;
        }
        
        var mainContainer = document.createElement('div');
        
        // Title
        var title = document.createElement('h1');
        title.className = 'page-title';
        title.textContent = 'IP Strategy Finder';
        mainContainer.appendChild(title);
        
        // Active filters
        mainContainer.appendChild(renderFilterPills());
        
        // Main grid
        var grid = document.createElement('div');
        grid.className = 'grid';
        
        // Left column - User selections
        var leftCol = document.createElement('div');
        leftCol.appendChild(renderPreferencesAccordion());
        leftCol.appendChild(renderOtherFactorsAccordion());
        
        // Right column - Results
        var rightCol = document.createElement('div');
        rightCol.appendChild(renderStrategies());
        
        grid.appendChild(leftCol);
        grid.appendChild(rightCol);
        mainContainer.appendChild(grid);
        
        appElement.appendChild(mainContainer);
      }
      
      function renderFilterPills() {
        var container = document.createElement('div');
        container.className = 'active-filters';
        
        // Render selected rights pills
        state.selectedRights.forEach(function(rightId) {
          var pill = document.createElement('div');
          pill.className = 'filter-pill right-' + getRightColor(rightId);
          pill.onclick = function() { removeRightFilter(rightId); };
          
          var label = ipRightsOptions.find(function(opt) {
            return opt.id === rightId;
          });
          pill.textContent = label ? label.label : rightId;
          
          var removeBtn = document.createElement('span');
          removeBtn.className = 'filter-remove';
          removeBtn.textContent = '×';
          pill.appendChild(removeBtn);
          
          container.appendChild(pill);
        });
        
        // Render selected situations pills
        state.selectedSituations.forEach(function(situationId) {
          var pill = document.createElement('div');
          pill.className = 'filter-pill situation';
          pill.onclick = function() { removeSituationFilter(situationId); };
          
          pill.textContent = getSituationLabel(situationId);
          
          var removeBtn = document.createElement('span');
          removeBtn.className = 'filter-remove';
          removeBtn.textContent = '×';
          pill.appendChild(removeBtn);
          
          container.appendChild(pill);
        });
        
        // Render preference pills
        Object.entries(state.preferences).forEach(function([key, value]) {
          if (value !== 0) {
            var pill = document.createElement('div');
            pill.className = 'filter-pill';
            pill.onclick = function() { toggleFactor(key, 'neutral'); };
            
            var label = '';
            if (key === 'onlineMarkets') label = 'Online marketplaces';
            else if (key === 'domainName') label = 'Domain name issues';
            else if (key === 'importingGoods') label = 'Importing goods';
            else label = 'Identify party';
            
            var valueText = '';
            if (value === 'yes') valueText = 'Yes';
            else if (value === 'no') valueText = 'No';
            else valueText = 'Unsure';
            
            pill.textContent = label + ': ' + valueText;
            
            var removeBtn = document.createElement('span');
            removeBtn.className = 'filter-remove';
            removeBtn.textContent = '×';
            pill.appendChild(removeBtn);
            
            container.appendChild(pill);
          }
        });
        
        return container;
      }
      
      function renderPreferencesAccordion() {
        var accordion = document.createElement('div');
        accordion.className = 'accordion mb-6';
        
        // Accordion header
        var header = document.createElement('div');
        header.className = 'accordion-header';
        header.onclick = function() { toggleAccordion('preferences'); };
        
        var title = document.createElement('div');
        title.className = 'accordion-title';
        
        var icon = document.createElement('span');
        icon.className = 'accordion-icon';
        icon.textContent = state.accordions.preferences ? '▲' : '▼';
        title.appendChild(icon);
        
        var titleText = document.createTextNode('Your Preferences');
        title.appendChild(titleText);
        header.appendChild(title);
        
        var statusDiv = document.createElement('div');
        var hasPreferences = Object.values(state.preferences).some(function(v) { return v !== 0; });
        if (hasPreferences) {
          var status = document.createElement('span');
          status.style.fontSize = '14px';
          status.style.color = '#667085';
          status.textContent = 'Preferences set';
          statusDiv.appendChild(status);
        }
        header.appendChild(statusDiv);
        
        accordion.appendChild(header);
        
        // Accordion content (only if open)
        if (state.accordions.preferences) {
          var content = document.createElement('div');
          content.className = 'accordion-content';
          
          var description = document.createElement('p');
          description.style.marginBottom = '16px';
          description.textContent = 'The following are possible considerations which might be relevant:';
          content.appendChild(description);
          
          // Render each preference group
          Object.entries(preferenceConfigs).forEach(function([prefKey, config]) {
            var group = document.createElement('div');
            group.className = 'preference-group';
            
            var label = document.createElement('label');
            label.className = 'preference-label';
            label.textContent = config.label;
            group.appendChild(label);
            
            var radioGroup = document.createElement('div');
            radioGroup.className = 'radio-group';
            
            // Render each option
            config.options.forEach(function(option) {
              var radio = document.createElement('label');
              radio.className = 'radio-button';
              if (state.preferences[prefKey] === option.value) {
                radio.className += ' radio-selected';
              }
              
              radio.textContent = option.label;
              radio.onclick = function() { togglePreference(prefKey, option.value); };
              
              radioGroup.appendChild(radio);
            });
            
            group.appendChild(radioGroup);
            content.appendChild(group);
          });
          
          accordion.appendChild(content);
        }
        
        return accordion;
      }
      
      function renderOtherFactorsAccordion() {
        var accordion = document.createElement('div');
        accordion.className = 'accordion mb-6';
        
        // Accordion header
        var header = document.createElement('div');
        header.className = 'accordion-header';
        header.onclick = function() { toggleAccordion('otherFactors'); };
        
        var title = document.createElement('div');
        title.className = 'accordion-title';
        
        var icon = document.createElement('span');
        icon.className = 'accordion-icon';
        icon.textContent = state.accordions.otherFactors ? '▲' : '▼';
        title.appendChild(icon);
        
        var titleText = document.createTextNode('Other Factors');
        title.appendChild(titleText);
        header.appendChild(title);
        
        var statusDiv = document.createElement('div');
        var hasFactors = Object.values(state.otherFactors).some(function(v) { return v !== 'neutral'; });
        if (hasFactors) {
          var status = document.createElement('span');
          status.style.fontSize = '14px';
          status.style.color = '#667085';
          status.textContent = 'Factors selected';
          statusDiv.appendChild(status);
        }
        header.appendChild(statusDiv);
        
        accordion.appendChild(header);
        
        // Accordion content (only if open)
        if (state.accordions.otherFactors) {
          var content = document.createElement('div');
          content.className = 'accordion-content';
          
          var description = document.createElement('p');
          description.style.marginBottom = '16px';
          description.textContent = 'Does the issue involve:';
          content.appendChild(description);
          
          // Render factor options
          var factors = [
            { key: 'onlineMarkets', label: 'Online market places or advertising' },
            { key: 'domainName', label: 'Domain name issues' },
            { key: 'importingGoods', label: 'Importing goods to Australia' },
            { key: 'identifyParty', label: 'Difficulty identifying the other party?' }
          ];
          
          factors.forEach(function(factor) {
            var group = document.createElement('div');
            group.className = 'preference-group';
            group.style.marginBottom = '12px';
            
            var label = document.createElement('label');
            label.className = 'preference-label';
            label.textContent = factor.label;
            group.appendChild(label);
            
            var radioGroup = document.createElement('div');
            radioGroup.className = 'radio-group';
            
            // Yes option
            var yesBtn = document.createElement('label');
            yesBtn.className = 'radio-button';
            if (state.otherFactors[factor.key] === 'yes') {
              yesBtn.className += ' radio-selected';
            }
            yesBtn.textContent = 'Yes';
            yesBtn.onclick = function() {
              toggleFactor(factor.key, state.otherFactors[factor.key] === 'yes' ? 'neutral' : 'yes');
            };
            radioGroup.appendChild(yesBtn);
            
            // No option
            var noBtn = document.createElement('label');
            noBtn.className = 'radio-button';
            if (state.otherFactors[factor.key] === 'no') {
              noBtn.className += ' radio-selected';
            }
            noBtn.textContent = 'No';
            noBtn.onclick = function() {
              toggleFactor(factor.key, state.otherFactors[factor.key] === 'no' ? 'neutral' : 'no');
            };
            radioGroup.appendChild(noBtn);
            
            // Unsure option
            var unsureBtn = document.createElement('label');
            unsureBtn.className = 'radio-button';
            if (state.otherFactors[factor.key] === 'unsure') {
              unsureBtn.className += ' radio-selected';
            }
            unsureBtn.textContent = 'Unsure';
            unsureBtn.onclick = function() {
              toggleFactor(factor.key, state.otherFactors[factor.key] === 'unsure' ? 'neutral' : 'unsure');
            };
            radioGroup.appendChild(unsureBtn);
            
            group.appendChild(radioGroup);
            content.appendChild(group);
          });
          
          accordion.appendChild(content);
        }
        
        return accordion;
      }
      
      function renderStrategies() {
        var container = document.createElement('div');
        container.className = 'card';
        
        var title = document.createElement('h2');
        title.style.fontSize = '20px';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '16px';
        title.style.color = 'var(--teal)';
        
        if (state.filteredStrategies.length > 0) {
          title.textContent = 'Potential IP Strategies';
        } else {
          title.textContent = 'Select criteria to see potential strategies';
        }
        
        container.appendChild(title);
        
        if (state.filteredStrategies.length === 0) {
          var emptyState = document.createElement('div');
          emptyState.className = 'empty-state';
          
          var message = document.createElement('p');
          message.className = 'empty-message';
          
          if (state.selectedRights.length > 0 || state.selectedSituations.length > 0) {
            message.textContent = 'No options match your current criteria. Try adjusting your selections.';
          } else {
            message.textContent = 'Select your IP rights and situation to see options to consider.';
          }
          
          emptyState.appendChild(message);
          container.appendChild(emptyState);
        } else {
          var strategyGrid = document.createElement('div');
          strategyGrid.className = 'strategy-grid';
          
          state.filteredStrategies.forEach(function(strategy, index) {
            var wrapper = document.createElement('div');
            wrapper.className = 'strategy-wrapper';
            
            var card = document.createElement('div');
            card.className = 'strategy-card';
            
            // Get the right border color
            var rights = strategy.right.split('; ');
            var mainRight = rights[0];
            card.className += ' border-' + getRightColor(mainRight);
            
            // Relevancy indicator
            var relevancy = document.createElement('div');
            relevancy.className = 'relevancy';
            
            var relevancyLabel = document.createElement('span');
            relevancyLabel.className = 'relevancy-label';
            relevancyLabel.textContent = 'Likely Applicability:';
            relevancy.appendChild(relevancyLabel);
            
            var relevancyScore = getRelevancyLevel(strategy.matchScore);
            var relevancyBadge = document.createElement('span');
            relevancyBadge.className = 'relevancy-badge ' + relevancyScore.level;
            relevancyBadge.textContent = relevancyScore.text;
            relevancy.appendChild(relevancyBadge);
            
            card.appendChild(relevancy);
            
            // Strategy details
            var overtitle = document.createElement('div');
            overtitle.className = 'strategy-overtitle';
            overtitle.textContent = strategy.overtitle;
            card.appendChild(overtitle);
            
            var title = document.createElement('h3');
            title.className = 'strategy-title';
            title.textContent = strategy.title;
            card.appendChild(title);
            
            var description = document.createElement('p');
            description.className = 'strategy-description';
            description.textContent = strategy.description;
            card.appendChild(description);
            
            // Strategy metadata
            var metadata = document.createElement('div');
            metadata.className = 'strategy-metadata';
            
            // Time commitment
            var timeRow = document.createElement('div');
            timeRow.className = 'metadata-row';
            
            var timeLabel = document.createElement('span');
            timeLabel.textContent = 'Time Commitment:';
            timeRow.appendChild(timeLabel);
            
            var timeValue = document.createElement('span');
            timeValue.className = 'tag';
            
            if (strategy.scores.timeCommitment <= 2) {
              timeValue.textContent = 'Days';
            } else if (strategy.scores.timeCommitment <= 4) {
              timeValue.textContent = 'Weeks';
            } else if (strategy.scores.timeCommitment <= 7) {
              timeValue.textContent = '1-12 Months';
            } else {
              timeValue.textContent = '12+ Months';
            }
            
            timeRow.appendChild(timeValue);
            metadata.appendChild(timeRow);
            
            // Investment
            var investRow = document.createElement('div');
            investRow.className = 'metadata-row';
            
            var investLabel = document.createElement('span');
            investLabel.textContent = 'Investment:';
            investRow.appendChild(investLabel);
            
            var investValue = document.createElement('span');
            investValue.className = 'tag';
            
            if (strategy.scores.investment <= 2) {
              investValue.textContent = 'Under $1,000';
            } else if (strategy.scores.investment <= 4) {
              investValue.textContent = 'Under $5,000';
            } else if (strategy.scores.investment <= 6) {
              investValue.textContent = 'Under $10,000';
            } else if (strategy.scores.investment <= 8) {
              investValue.textContent = 'Under $25,000';
            } else {
              investValue.textContent = '$25,000+';
            }
            
            investRow.appendChild(investValue);
            metadata.appendChild(investRow);
            
            // IP Type
            var ipRow = document.createElement('div');
            ipRow.className = 'metadata-row';
            
            var ipLabel = document.createElement('span');
            ipLabel.textContent = 'IP Type:';
            ipRow.appendChild(ipLabel);
            
            var ipValue = document.createElement('span');
            ipValue.className = 'tag';
            ipValue.textContent = strategy.right;
            ipRow.appendChild(ipValue);
            metadata.appendChild(ipRow);
            
            card.appendChild(metadata);
            wrapper.appendChild(card);
            strategyGrid.appendChild(wrapper);
          });
          
          container.appendChild(strategyGrid);
        }
        
        return container;
      }

      // Initialize the application
      init();
      
      // Return public API
      return {
        init: init
      };
    }

    // Start the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      var app = IPStrategyFinder();
    });
  </script>
</body>
</html> = 'filter-pill';
            pill.onclick = function() { removePreferenceFilter(key); };
            
            pill.textContent = preferenceConfigs[key].label + ': ' + getPreferenceText(key, value);
            
            var removeBtn = document.createElement('span');
            removeBtn.className = 'filter-remove';
            removeBtn.textContent = '×';
            pill.appendChild(removeBtn);
            
            container.appendChild(pill);
          }
        });
        
        // Render other factors pills
        Object.entries(state.otherFactors).forEach(function([key, value]) {
          if (value !== 'neutral') {
            var pill = document.createElement('div');
            pill.className
