<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Strategy Finder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">IP Strategy Finder</div>
        <nav class="nav">
          <a href="#">Home</a>
          <a href="#">About</a>
        </nav>
      </div>
    </div>
  </header>

  <div class="container main-content">
    <div id="app"></div>
  </div>

  <footer class="footer">
    <div class="container">
      <p style="text-align: center; font-size: 14px;">&copy; 2025 IP Strategy Finder</p>
    </div>
  </footer>

  <script src="app.js" type="text/babel"></script>
</body>
</html>


/* Base styles */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  color: #1D2939;
  background-color: #F6FAFC;
  line-height: 1.5;
  margin: 0;
  padding: 0;
}

/* Color palette */
:root {
  --dark-blue: #1D2939;
  --teal: #55ABC9;
  --light-mint: #F6FAFC;
  --border-color: #E4E7EC;
  --text-primary: #1D2939;
  --text-secondary: #667085;
  --highlight: #787ABB;
  
  /* IP Rights colors */
  --patent-color: #1DA7AF;
  --trademark-color: #DE4326;
  --design-color: #84C98F;
  --pbr-color: #F1AC1E;
  --copyright-color: #787ABB;
  --any-color: #667085;
}

/* Layout */
.container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 20px;
}

/* Header */
.header {
  background-color: var(--dark-blue);
  color: white;
  padding: 15px 0;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-size: 22px;
  font-weight: 600;
}

.nav a {
  color: white;
  text-decoration: none;
  margin-left: 30px;
}

/* Footer */
.footer {
  background-color: var(--dark-blue);
  color: white;
  padding: 15px 0;
  margin-top: 40px;
}

/* Main content */
.main-content {
  padding: 40px 0;
}

/* Card styling */
.card {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
  padding: 24px;
  margin-bottom: 20px;
}

/* Filter pill styles */
.active-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 20px;
}

.filter-pill {
  display: inline-flex;
  align-items: center;
  background-color: var(--light-mint);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  font-size: 14px;
  padding: 6px 12px;
  border-radius: 20px;
  cursor: pointer;
}

.filter-pill .remove {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.1);
  color: var(--text-primary);
  font-size: 12px;
}

.filter-pill:hover .remove {
  background-color: rgba(0, 0, 0, 0.15);
}

.filter-pill.right-patent {
  background-color: rgba(29, 167, 175, 0.1);
  border-color: var(--patent-color);
}

.filter-pill.right-trademark {
  background-color: rgba(222, 67, 38, 0.1);
  border-color: var(--trademark-color);
}

.filter-pill.right-design {
  background-color: rgba(132, 201, 143, 0.1);
  border-color: var(--design-color);
}

.filter-pill.right-pbr {
  background-color: rgba(241, 172, 30, 0.1);
  border-color: var(--pbr-color);
}

.filter-pill.right-copyright {
  background-color: rgba(120, 122, 187, 0.1);
  border-color: var(--copyright-color);
}

.filter-pill.right-any {
  background-color: rgba(102, 112, 133, 0.1);
  border-color: var(--any-color);
}

.filter-pill.situation {
  background-color: rgba(85, 171, 201, 0.1);
  border-color: var(--teal);
}

/* Accordion */
.accordion {
  margin-bottom: 16px;
}

.accordion-header {
  background-color: white;
  padding: 16px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.accordion-header:hover {
  background-color: #F9FAFB;
}

.accordion-arrow {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #888;
  margin-right: 8px;
}

.accordion-title-section {
  display: flex;
  align-items: center;
}

.accordion-content {
  padding: 16px;
  border: 1px solid var(--border-color);
  border-top: none;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* Grid layout */
.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
}

@media (min-width: 768px) {
  .grid {
    grid-template-columns: 1fr 1fr;
  }
}

@media (min-width: 1024px) {
  .grid {
    grid-template-columns: 1fr 3fr;
  }
}

/* Radio button group */
.radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 16px;
}

.radio-button {
  display: inline-block;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.radio-button.selected {
  background-color: var(--teal);
  color: white;
  border-color: var(--teal);
}

.radio-button:hover:not(.selected) {
  background-color: #F0F4F8;
}

/* Preference button group styles */
.preference-group {
  margin-bottom: 20px;
}

.preference-label {
  display: block;
  font-weight: 500;
  margin-bottom: 8px;
}

/* Strategy card styles */
.strategy-card {
  border-left: 3px solid var(--teal);
  height: 100%;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.card-wrapper:nth-child(3n+2) {
  transform: translateY(60px);
}

/* Tags */
.tag {
  display: inline-block;
  background-color: rgba(85, 171, 201, 0.1);
  color: var(--teal);
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 4px;
  margin-right: 8px;
  margin-bottom: 5px;
}

.tag-patent {
  background-color: rgba(29, 167, 175, 0.1);
  color: var(--patent-color);
}

.tag-trademark {
  background-color: rgba(222, 67, 38, 0.1);
  color: var(--trademark-color);
}

.tag-design {
  background-color: rgba(132, 201, 143, 0.1);
  color: var(--design-color);
}

.tag-pbr {
  background-color: rgba(241, 172, 30, 0.1);
  color: var(--pbr-color);
}

.tag-copyright {
  background-color: rgba(120, 122, 187, 0.1);
  color: var(--copyright-color);
}

.tag-any {
  background-color: rgba(102, 112, 133, 0.1);
  color: var(--any-color);
}

/* Border colors */
.border-patent {
  border-left-color: var(--patent-color);
}

.border-trademark {
  border-left-color: var(--trademark-color);
}

.border-design {
  border-left-color: var(--design-color);
}

.border-pbr {
  border-left-color: var(--pbr-color);
}

.border-copyright {
  border-left-color: var(--copyright-color);
}

.border-any {
  border-left-color: var(--any-color);
}

/* Relevancy indicator styles */
.relevancy-indicator {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  font-weight: 500;
}

.relevancy-badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 600;
}

.relevancy-very-high {
  background-color: rgba(34, 197, 94, 1);
  color: white;
}

.relevancy-high {
  background-color: rgba(34, 197, 94, 0.8);
  color: white;
}

.relevancy-medium {
  background-color: rgba(34, 197, 94, 0.6);
  color: white;
}

.relevancy-low {
  background-color: rgba(34, 197, 94, 0.4);
  color: white;
}

.relevancy-very-low {
  background-color: rgba(34, 197, 94, 0.2);
  color: white;
}

const IPStrategyFinder = () => {
  // State for app data
  const [strategies, setStrategies] = React.useState([]);
  const [loading, setLoading] = React.useState(true);
  const [accordions, setAccordions] = React.useState({
    preferences: false,
    otherFactors: false
  });
  
  // Preference configurations
  const preferenceConfigs = {
    timeCommitment: {
      label: 'Time Commitment',
      options: [
        { value: -2, label: 'Days' },
        { value: -1, label: 'Weeks' },
        { value: 0, label: 'No preference' },
        { value: 1, label: '1-12 Months' },
        { value: 2, label: '12+ Months' }
      ]
    },
    investment: {
      label: 'Investment',
      options: [
        { value: -2, label: 'Under $1,000' },
        { value: -1, label: 'Under $5,000' },
        { value: 0, label: 'No preference' },
        { value: 1, label: 'Under $25,000' },
        { value: 2, label: '$25,000+' }
      ]
    },
    commercialAgreements: {
      label: 'Commercial Agreements',
      options: [
        { value: -1, label: 'Avoid agreements' },
        { value: 0, label: 'No preference' },
        { value: 1, label: 'Open to agreements' }
      ]
    },
    thirdPartyServices: {
      label: 'Third-Party Services',
      options: [
        { value: -2, label: 'Self-managed only' },
        { value: -1, label: 'Minimal assistance' },
        { value: 0, label: 'No preference' },
        { value: 1, label: 'Professional support' },
        { value: 2, label: 'Full service solution' }
      ]
    },
    legalAction: {
      label: 'Legal Action',
      options: [
        { value: -2, label: 'Strongly avoid' },
        { value: -1, label: 'Prefer to avoid' },
        { value: 0, label: 'No preference' },
        { value: 1, label: 'Open to consider' },
        { value: 2, label: 'Willing to use' }
      ]
    }
  };
  
  // State for user selections - pre-selected "Trade mark" and "Enforcement"
  const [selectedRights, setSelectedRights] = React.useState(['Trade mark']);
  const [selectedSituations, setSelectedSituations] = React.useState(['Enforcement']);
  const [preferences, setPreferences] = React.useState({
    timeCommitment: 0,
    investment: 0,
    commercialAgreements: 0,
    thirdPartyServices: 0,
    legalAction: 0
  });
  
  // State for other factors
  const [otherFactors, setOtherFactors] = React.useState({
    onlineMarkets: 'neutral',
    domainName: 'neutral',
    importingGoods: 'neutral',
    identifyParty: 'neutral'
  });
  
  // Filtered and ranked strategies
  const [filteredStrategies, setFilteredStrategies] = React.useState([]);
  
  // Options for IP rights
  const ipRightsOptions = [
    { id: 'Patent', label: 'Patents', color: 'patent' },
    { id: 'Trade mark', label: 'Trade marks', color: 'trademark' },
    { id: 'Design', label: 'Design rights', color: 'design' },
    { id: 'PBR', label: 'Plant breeder\'s rights', color: 'pbr' },
    { id: 'Copyright', label: 'Copyright', color: 'copyright' },
    { id: 'Any', label: 'Any IP right', color: 'any' }
  ];
  
  // Options for situation
  const situationOptions = [
    { id: 'Accused', label: 'I\'ve been accused of infringing' },
    { id: 'Enforcement', label: 'I believe my IP has been infringed' },
    { id: 'Proactive', label: 'I\'m proactively protecting my IP' },
    { id: 'Professional', label: 'I\'m seeking support of an IP professional' }
  ];
  
  // Initialize data
  React.useEffect(() => {
    // Load strategies from the JSON data
    const strategiesData = [
      {
        id: 4,
        overtitle: "Trade mark opposition",
        title: "Challenge the registration of a trade mark",
        description: "Initiate a trade mark opposition process against a new trademark with IP Australia",
        responseType: ["Enforcement", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 6,
          investment: 6,
          commercialAgreements: 2,
          thirdPartyServices: 7,
          legalAction: 7
        }
      },
      {
        id: 7,
        overtitle: "Court - Trade Mark",
        title: "Seek binding, authoritative decisions",
        description: "Escalate a wide range of trade mark matters to court",
        responseType: ["Enforcement", "Accused", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 9,
          investment: 10,
          commercialAgreements: 4,
          thirdPartyServices: 9,
          legalAction: 10
        }
      },
      {
        id: 14,
        overtitle: "Letter of demand",
        title: "Demand the other party stops infringing",
        description: "Send a letter to the infringing party notifying them of potential infringement.",
        responseType: ["Enforcement", "Professional"],
        right: "Any IP right",
        scores: {
          timeCommitment: 3,
          investment: 2,
          commercialAgreements: 4,
          thirdPartyServices: 5,
          legalAction: 3
        }
      },
      {
        id: 18,
        overtitle: "Takedown request",
        title: "Stop infringement facilitated online",
        description: "Request infringing material is removed from online marketplaces and platforms.",
        responseType: ["Enforcement"],
        right: "Trade mark; Copyright",
        scores: {
          timeCommitment: 3,
          investment: 2,
          commercialAgreements: 2,
          thirdPartyServices: 3,
          legalAction: 2
        }
      },
      {
        id: 26,
        overtitle: "Domain Name Dispute (auDRP)",
        title: "Dispute a domain name that infringes your trade mark",
        description: "Dispute an .au domain name that may infringe an IP right",
        responseType: ["Enforcement", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 5,
          investment: 6,
          commercialAgreements: 3,
          thirdPartyServices: 7,
          legalAction: 6
        }
      },
      {
        id: 28,
        overtitle: "Apply for a trade mark",
        title: "Register your trade mark",
        description: "Strengthen your position as the registered owner of your trade mark in Australia",
        responseType: ["Proactive", "Enforcement", "Future", "Professional"],
        right: "Trade mark",
        scores: {
          timeCommitment: 4,
          investment: 5,
          commercialAgreements: 5,
          thirdPartyServices: 6,
          legalAction: 2
        }
      }
    ];
    
    setStrategies(strategiesData);
    setLoading(false);
  }, []);

  // Get readable preference text
  const getPreferenceText = (preference, value) => {
    const config = preferenceConfigs[preference];
    const option = config.options.find(opt => opt.value === value);
    return option ? option.label : 'No preference';
  };
  
  // Helper function for getting IP right color class
  const getRightColor = (rightId) => {
    const right = ipRightsOptions.find(opt => opt.id === rightId);
    return right ? right.color : 'any';
  };
  
  // Helper function for getting situation label
  const getSituationLabel = (situationId) => {
    const situation = situationOptions.find(opt => opt.id === situationId);
    return situation ? situation.label : situationId;
  };
  
  // Helper function to get relevancy level text and CSS class
  const getRelevancyLevel = (score) => {
    if (score >= 90) return { level: 'very-high', text: 'Very High' };
    if (score >= 75) return { level: 'high', text: 'High' };
    if (score >= 50) return { level: 'medium', text: 'Medium' };
    if (score >= 25) return { level: 'low', text: 'Low' };
    return { level: 'very-low', text: 'Very Low' };
  };
  
  // Toggle section accordion
  const toggleAccordion = (section) => {
    setAccordions({
      ...accordions,
      [section]: !accordions[section]
    });
  };
  
  // Toggle IP right selection
  const toggleRight = (rightId) => {
    if (selectedRights.includes(rightId)) {
      setSelectedRights(selectedRights.filter(id => id !== rightId));
    } else {
      setSelectedRights([...selectedRights, rightId]);
    }
  };
  
  // Toggle situation selection
  const toggleSituation = (situationId) => {
    if (selectedSituations.includes(situationId)) {
      setSelectedSituations(selectedSituations.filter(id => id !== situationId));
    } else {
      setSelectedSituations([...selectedSituations, situationId]);
    }
  };
  
  // Toggle factor selection
  const toggleFactor = (factor, value) => {
    setOtherFactors({
      ...otherFactors,
      [factor]: value
    });
  };
  
  // Toggle preference option
  const togglePreference = (preference, value) => {
    // If already selected, reset to 0 (no preference)
    if (preferences[preference] === value) {
      setPreferences({
        ...preferences,
        [preference]: 0
      });
    } else {
      setPreferences({
        ...preferences,
        [preference]: value
      });
    }
  };

  // Remove right filter
  const removeRightFilter = (rightId) => {
    setSelectedRights(selectedRights.filter(id => id !== rightId));
  };

  // Remove situation filter
  const removeSituationFilter = (situationId) => {
    setSelectedSituations(selectedSituations.filter(id => id !== situationId));
  };

  // Remove preference filter
  const removePreferenceFilter = (preference) => {
    setPreferences({
      ...preferences,
      [preference]: 0
    });
  };

  // Calculate filtered and ranked strategies when user selections change
  React.useEffect(() => {
    if (loading) return;
    
    // First filter strategies based on selected rights and situations
    let filtered = [...strategies];
    
    // Filter by selected IP rights
    if (selectedRights.length > 0) {
      filtered = filtered.filter(strategy => {
        const strategyRights = strategy.right.split('; ');
        return selectedRights.some(right => 
          strategyRights.includes(right) || strategyRights.includes('Any')|| strategyRights.includes('Any IP right')
        );
      });
    }
    
    // Filter by selected situations
    if (selectedSituations.length > 0) {
      filtered = filtered.filter(strategy => {
        return selectedSituations.some(situation => 
          strategy.responseType.includes(situation)
        );
      });
    }
    
    // Calculate preference match scores for each strategy
    const ranked = filtered.map(strategy => {
      // Initialize match score calculation
      let totalScore = 0;
      let totalWeight = 0;
      const matches = [];
      const nonMatches = [];
      
      // Helper function to calculate match for a preference
      const calculatePreferenceMatch = (preference, prefValue, strategyValue) => {
        // Skip if user has no preference (value is 0)
        if (prefValue === 0) return { score: 0, weight: 0 };
        
        // Get the configuration for this preference
        const config = preferenceConfigs[preference];
        const maxValue = Math.max(...config.options.map(opt => Math.abs(opt.value)));
        
        // For positive preferences (user wants high value)
        if (prefValue > 0) {
          // Convert the preference value to expected strategy value (0-10 scale)
          const expectedValue = (prefValue / maxValue) * 10;
          // Calculate match (10 is perfect match, 0 is worst)
          const score = Math.max(0, 10 - Math.abs(expectedValue - strategyValue));
          // Use preference strength as weight
          const weight = Math.abs(prefValue) / maxValue;
          
          return { 
            score, 
            weight,
            isMatch: score > 5
          };
        } 
        // For negative preferences (user wants low value)
        else {
          // For negative preferences, lower strategy values are better
          const score = Math.max(0, 10 - strategyValue);
          // Use preference strength as weight
          const weight = Math.abs(prefValue) / maxValue;
          
          return {
            score,
            weight,
            isMatch: score > 5
          };
        }
      };

      // Calculate matches for each preference
      const timeMatch = calculatePreferenceMatch(
        'timeCommitment', 
        preferences.timeCommitment, 
        strategy.scores.timeCommitment
      );
      
      const investmentMatch = calculatePreferenceMatch(
        'investment', 
        preferences.investment, 
        strategy.scores.investment
      );
      
      const agreementMatch = calculatePreferenceMatch(
        'commercialAgreements', 
        preferences.commercialAgreements, 
        strategy.scores.commercialAgreements
      );
      
      const serviceMatch = calculatePreferenceMatch(
        'thirdPartyServices', 
        preferences.thirdPartyServices, 
        strategy.scores.thirdPartyServices
      );
      
      const legalMatch = calculatePreferenceMatch(
        'legalAction', 
        preferences.legalAction, 
        strategy.scores.legalAction
      );
      
      // Add preference matches to the lists
      if (timeMatch.weight > 0) {
        if (timeMatch.isMatch) {
          matches.push('Time commitment');
        } else {
          nonMatches.push('Time commitment');
        }
      }
      
      if (investmentMatch.weight > 0) {
        if (investmentMatch.isMatch) {
          matches.push('Investment level');
        } else {
          nonMatches.push('Investment level');
        }
      }
      
      if (agreementMatch.weight > 0) {
        if (agreementMatch.isMatch) {
          matches.push('Commercial agreements');
        } else {
          nonMatches.push('Commercial agreements');
        }
      }
      
      if (serviceMatch.weight > 0) {
        if (serviceMatch.isMatch) {
          matches.push('Third-party services');
        } else {
          nonMatches.push('Third-party services');
        }
      }
      
      if (legalMatch.weight > 0) {
        if (legalMatch.isMatch) {
          matches.push('Legal action');
        } else {
          nonMatches.push('Legal action');
        }
      }
      
      // Calculate overall weighted score
      totalScore += timeMatch.score * timeMatch.weight;
      totalScore += investmentMatch.score * investmentMatch.weight;
      totalScore += agreementMatch.score * agreementMatch.weight;
      totalScore += serviceMatch.score * serviceMatch.weight;
      totalScore += legalMatch.score * legalMatch.weight;
      
      totalWeight += timeMatch.weight;
      totalWeight += investmentMatch.weight;
      totalWeight += agreementMatch.weight;
      totalWeight += serviceMatch.weight;
      totalWeight += legalMatch.weight;
      
      // Calculate final match score (0-100 scale)
      const matchScore = totalWeight > 0 
        ? (totalScore / (totalWeight * 10)) * 100 
        : 100; // Perfect score if no preferences set
      
      return {
        ...strategy,
        matchScore,
        matches,
        nonMatches
      };
    });
    
    // Sort by match score (highest first)
    ranked.sort((a, b) => b.matchScore - a.matchScore);
    
    setFilteredStrategies(ranked);
  }, [loading, strategies, selectedRights, selectedSituations, preferences]);

  // Show loading state
  if (loading) {
    return (
      <div className="text-center py-12">
        <div className="text-xl">Loading IP strategies...</div>
      </div>
    );
  }

  return(
    <div>
      <h1 className="text-3xl font-bold mb-6" style={{ color: 'var(--teal)' }}>IP Strategy Finder</h1>
      
      {/* Active Filters Section */}
      <div className="active-filters mb-6">
        {selectedRights.map(rightId => (
          <div 
            key={`filter-right-${rightId}`} 
            className={`filter-pill right-${getRightColor(rightId)}`}
            onClick={() => removeRightFilter(rightId)}
          >
            {ipRightsOptions.find(opt => opt.id === rightId)?.label || rightId}
            <span className="remove">×</span>
          </div>
        ))}
        
        {selectedSituations.map(situationId => (
          <div 
            key={`filter-situation-${situationId}`} 
            className="filter-pill situation"
            onClick={() => removeSituationFilter(situationId)}
          >
            {getSituationLabel(situationId)}
            <span className="remove">×</span>
          </div>
        ))}
        
        {Object.entries(preferences).map(([key, value]) => (
          value !== 0 ? (
            <div 
              key={`filter-pref-${key}`} 
              className="filter-pill"
              onClick={() => removePreferenceFilter(key)}
            >
              {preferenceConfigs[key].label}: {getPreferenceText(key, value)}
              <span className="remove">×</span>
            </div>
          ) : null
        ))}
        
        {Object.entries(otherFactors).map(([key, value]) => (
          value !== 'neutral' ? (
            <div 
              key={`filter-factor-${key}`} 
              className="filter-pill"
              onClick={() => toggleFactor(key, 'neutral')}

              >
              {key === 'onlineMarkets' ? 'Online marketplaces' : 
               key === 'domainName' ? 'Domain name issues' : 
               key === 'importingGoods' ? 'Importing goods' : 
               'Identify party'}: {value === 'yes' ? 'Yes' : value === 'no' ? 'No' : 'Unsure'}
              <span className="remove">×</span>
            </div>
          ) : null
        ))}
      </div>
      
      <div className="grid">
        {/* Left column - User selections */}
        <div>
          {/* Preferences Section */}
          <div className="accordion mb-6">
            <div 
              className="accordion-header"
              onClick={() => toggleAccordion('preferences')}
            >
              <div className="accordion-title-section">
                <div className="accordion-arrow">
                  {accordions.preferences ? (
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clipRule="evenodd" />
                    </svg>
                  ) : (
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" />
                    </svg>
                  )}
                </div>
                <span>Your Preferences</span>
              </div>
              
              <div>
                {Object.values(preferences).some(v => v !== 0) && (
                  <span className="text-sm text-gray-500">Preferences set</span>
                )}
              </div>
            </div>
            
            {accordions.preferences && (
              <div className="accordion-content">
                <p className="mb-4">The following are possible considerations which might be relevant:</p>
                
                {/* Render preference groups */}
                {Object.entries(preferenceConfigs).map(([prefKey, config]) => (
                  <div className="preference-group" key={prefKey}>
                    <label className="preference-label">{config.label}</label>
                    <div className="radio-group">
                      {config.options.map(option => (
                        <label 
                          key={`${prefKey}-${option.value}`}
                          className={`radio-button ${preferences[prefKey] === option.value ? 'selected' : ''}`}
                          onClick={() => togglePreference(prefKey, option.value)}
                        >
                          {option.label}
                        </label>
                      ))}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
          
          {/* Other Factors Section */}
          <div className="accordion mb-6">
            <div 
              className="accordion-header"
              onClick={() => toggleAccordion('otherFactors')}
            >
              <div className="accordion-title-section">
                <div className="accordion-arrow">
                  {accordions.otherFactors ? (
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clipRule="evenodd" />
                    </svg>
                  ) : (
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" />
                    </svg>
                  )}
                </div>
                <span>Other Factors</span>
              </div>
              
              <div>
                {Object.values(otherFactors).some(v => v !== 'neutral') && (
                  <span className="text-sm text-gray-500">Factors selected</span>
                )}
              </div>
            </div>
            
            {accordions.otherFactors && (
              <div className="accordion-content">
                <p className="mb-4">Does the issue involve:</p>
                
                <div className="mb-4">
                  {/* Online marketplaces */}
                  <div className="preference-group mb-3">
                    <label className="preference-label">Online market places or advertising</label>
                    <div className="radio-group">
                      <label 
                        className={`radio-button ${otherFactors.onlineMarkets === 'yes' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('onlineMarkets', otherFactors.onlineMarkets === 'yes' ? 'neutral' : 'yes')}
                      >
                        Yes
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.onlineMarkets === 'no' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('onlineMarkets', otherFactors.onlineMarkets === 'no' ? 'neutral' : 'no')}
                      >
                        No
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.onlineMarkets === 'unsure' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('onlineMarkets', otherFactors.onlineMarkets === 'unsure' ? 'neutral' : 'unsure')}
                      >
                        Unsure
                      </label>
                    </div>
                  </div>
                  
                  {/* Domain name issues */}
                  <div className="preference-group mb-3">
                    <label className="preference-label">Domain name issues</label>
                    <div className="radio-group">
                      <label 
                        className={`radio-button ${otherFactors.domainName === 'yes' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('domainName', otherFactors.domainName === 'yes' ? 'neutral' : 'yes')}
                      >
                        Yes
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.domainName === 'no' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('domainName', otherFactors.domainName === 'no' ? 'neutral' : 'no')}
                      >
                        No
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.domainName === 'unsure' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('domainName', otherFactors.domainName === 'unsure' ? 'neutral' : 'unsure')}
                      >
                        Unsure
                      </label>
                    </div>
                  </div>
                  
                  {/* Importing goods */}
                  <div className="preference-group mb-3">
                    <label className="preference-label">Importing goods to Australia</label>
                    <div className="radio-group">
                      <label 
                        className={`radio-button ${otherFactors.importingGoods === 'yes' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('importingGoods', otherFactors.importingGoods === 'yes' ? 'neutral' : 'yes')}
                      >
                        Yes
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.importingGoods === 'no' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('importingGoods', otherFactors.importingGoods === 'no' ? 'neutral' : 'no')}
                      >
                        No
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.importingGoods === 'unsure' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('importingGoods', otherFactors.importingGoods === 'unsure' ? 'neutral' : 'unsure')}
                      >
                        Unsure
                      </label>
                    </div>
                  </div>
                  
                  {/* Identify the other party */}
                  <div className="preference-group mb-3">
                    <label className="preference-label">Difficulty identifying the other party?</label>
                    <div className="radio-group">
                      <label 
                        className={`radio-button ${otherFactors.identifyParty === 'yes' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('identifyParty', otherFactors.identifyParty === 'yes' ? 'neutral' : 'yes')}
                      >
                        Yes
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.identifyParty === 'no' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('identifyParty', otherFactors.identifyParty === 'no' ? 'neutral' : 'no')}
                      >
                        No
                      </label>
                      <label 
                        className={`radio-button ${otherFactors.identifyParty === 'unsure' ? 'selected' : ''}`}
                        onClick={() => toggleFactor('identifyParty', otherFactors.identifyParty === 'unsure' ? 'neutral' : 'unsure')}
                      >
                        Unsure
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Right column - Results */}
        <div>
          <div className="card">
            <h2 className="text-xl font-bold mb-4" style={{ color: 'var(--teal)' }}>
              {filteredStrategies.length > 0 
                ? 'Potential IP Strategies' 
                : 'Select criteria to see potential strategies'}
            </h2>
            
            {filteredStrategies.length === 0 ? (
              <div className="bg-gray-50 p-8 text-center rounded-lg">
                <p className="text-gray-600">
                  {selectedRights.length > 0 || selectedSituations.length > 0
                    ? 'No options match your current criteria. Try adjusting your selections.'
                    : 'Select your IP rights and situation to see options to consider.'}
                </p>
              </div>
            ) : (
              <div className="card-grid">
                {filteredStrategies.map(strategy => {
                  const rights = strategy.right.split('; ');
                  const mainRight = rights[0];
                  const borderClass = `border-${getRightColor(mainRight)}`;

                  return (
                    <div key={strategy.id} className="card-wrapper">
                      <div className={`card ${borderClass}`}>
                        <div className="relevancy-indicator" style={{ marginBottom: '10px', justifyContent: 'flex-end' }}>
                          <span style={{ fontSize: '11px', alignSelf: 'flex-end', marginRight: '5px' }}>Likely Applicability:</span>
                          <span className={`relevancy-badge relevancy-${getRelevancyLevel(strategy.matchScore).level}`}>
                            {getRelevancyLevel(strategy.matchScore).text}
                          </span>
                        </div>
                        
                        <div className="text-sm text-gray-500 mb-1">{strategy.overtitle}</div>
                        <h3 className="text-lg font-semibold mb-2">{strategy.title}</h3>
                        <p className="text-gray-700 mb-4">{strategy.description}</p>
                        <div className="flex flex-wrap gap-2 mb-4">
                        </div>
                        
                        {/* Time commitment, investment, and IP type info */}
                        <div style={{ fontSize: '11px', color: 'var(--text-secondary)', display: 'flex', flexDirection: 'column', gap: '4px' }}>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>Time Commitment:</span>
                            <span className="tag" style={{ backgroundColor: 'rgba(85, 171, 201, 0.1)' }}>
                              {strategy.scores.timeCommitment <= 2 ? 'Days' : 
                              strategy.scores.timeCommitment <= 4 ? 'Weeks' : 
                              strategy.scores.timeCommitment <= 7 ? '1-12 Months' : '12+ Months'}
                            </span>
                          </div>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>Investment:</span>
                            <span className="tag" style={{ backgroundColor: 'rgba(85, 171, 201, 0.1)' }}>
                              {strategy.scores.investment <= 2 ? 'Under $1,000' : 
                              strategy.scores.investment <= 4 ? 'Under $5,000' : 
                              strategy.scores.investment <= 6 ? 'Under $10,000' : 
                              strategy.scores.investment <= 8 ? 'Under $25,000' : '$25,000+'}
                            </span>
                          </div>
                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                            <span>IP Type:</span>
                            <span className="tag" style={{ backgroundColor: 'rgba(85, 171, 201, 0.1)' }}>
                              {strategy.right}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

// Render the app
ReactDOM.render(
  <IPStrategyFinder />,
  document.getElementById('app')
);
